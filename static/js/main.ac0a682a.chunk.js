(this["webpackJsonpclimate-risk-map"]=this["webpackJsonpclimate-risk-map"]||[]).push([[0],{104:function(e,t,a){"use strict";a.r(t);var n,o=a(0),r=a.n(o),i=a(63),m=a.n(i),c=(a(97),a(17)),l=a(2),_=a(38),s=a(120),d=a(121),u=a(122),f=a(123);!function(e){e[e.cmi10_00_1=0]="cmi10_00_1",e[e.cmi10_80_9=1]="cmi10_80_9",e[e.cmi10_80_1=2]="cmi10_80_1",e[e.def_00_19_=3]="def_00_19_",e[e.def_80_19_=4]="def_80_19_",e[e.def_80_99_=5]="def_80_99_",e[e.dry_00_19_=6]="dry_00_19_",e[e.dry_80_19_=7]="dry_80_19_",e[e.dry_80_99_=8]="dry_80_99_",e[e.gw_00_19_E=9]="gw_00_19_E",e[e.gw_80_19_E=10]="gw_80_19_E",e[e.gw_80_99_E=11]="gw_80_99_E",e[e.ht_00_19_E=12]="ht_00_19_E",e[e.ht_80_19_E=13]="ht_80_19_E",e[e.ht_80_99_E=14]="ht_80_99_E",e[e.pet_00_19_=15]="pet_00_19_",e[e.pet_80_19_=16]="pet_80_19_",e[e.pet_80_99_=17]="pet_80_99_",e[e.prc_00_19_=18]="prc_00_19_",e[e.prc_80_19_=19]="prc_80_19_",e[e.prc_80_99_=20]="prc_80_99_",e[e.ro_00_19_E=21]="ro_00_19_E",e[e.ro_80_19_E=22]="ro_80_19_E",e[e.ro_80_99_E=23]="ro_80_99_E",e[e.wet_00_19_=24]="wet_00_19_",e[e.wet_80_19_=25]="wet_80_19_",e[e.wet_80_99_=26]="wet_80_99_",e[e.Allindustr=27]="Allindustr",e[e.Farming=28]="Farming",e[e.Mining=29]="Mining",e[e.Constructi=30]="Constructi",e[e.Retailtrad=31]="Retailtrad",e[e.Informatio=32]="Informatio",e[e.Wholesalet=33]="Wholesalet",e[e.discuss=34]="discuss",e[e.PerCapitap=35]="PerCapitap",e[e.GDP2018=36]="GDP2018"}(n||(n={}));var p=Object(l.b)(",.0f"),b=new Map;b.set(n.cmi10_00_1,{name:"Climate Moisture Index 2000-2019",units:"",formatter:p,color:Object(l.d)(s.a).domain([-10,0,10]),normalized:!0}),b.set(n.cmi10_80_9,{name:"Climate Moisture Index 1980-1999",units:"",formatter:p,color:Object(l.d)(s.a).domain([-10,0,10]),normalized:!0}),b.set(n.cmi10_80_1,{name:"Climate Moisture Index 1980-2019",units:"",formatter:p,color:Object(l.d)(s.a).domain([-10,0,10]),normalized:!0}),b.set(n.def_00_19_,{name:"Irrigation Deficit 2000-2019",units:"mm/year",formatter:p,color:Object(l.d)((function(e){return s.a(1-e)})).domain([-600,0,1600]),normalized:!1}),b.set(n.def_80_19_,{name:"Irrigation Deficit 1980-2019",units:"mm/year",formatter:p,color:Object(l.d)((function(e){return s.a(1-e)})).domain([-600,0,1600]),normalized:!1}),b.set(n.def_80_99_,{name:"Irrigation Deficit 1980-1999",units:"mm/year",formatter:p,color:Object(l.d)((function(e){return s.a(1-e)})).domain([-600,0,1600]),normalized:!1}),b.set(n.dry_00_19_,{name:"Drought Indicator 2000-2019",units:"mm/year",formatter:p,color:Object(l.e)(d.a).domain([0,1500]),normalized:!1}),b.set(n.dry_80_19_,{name:"Drought Indicator 1980-2019",units:"mm/year",formatter:p,color:Object(l.e)(d.a).domain([0,1500]),normalized:!1}),b.set(n.dry_80_99_,{name:"Drought Indicator 1980-1999",units:"mm/year",formatter:p,color:Object(l.e)(d.a).domain([0,1500]),normalized:!1}),b.set(n.gw_00_19_E,{name:"Groundwater 2000-2019",units:"mm/month",formatter:p,color:Object(l.e)(d.a).domain([0,40]),normalized:!1}),b.set(n.gw_80_19_E,{name:"Groundwater 1980-2019",units:"mm/month",formatter:p,color:Object(l.e)(d.a).domain([0,40]),normalized:!1}),b.set(n.gw_80_99_E,{name:"Groundwater 1980-1999",units:"mm/month",formatter:p,color:Object(l.e)(d.a).domain([0,40]),normalized:!1}),b.set(n.ht_00_19_E,{name:"Maximum Month Temperature 2000-2019",units:"\xb0C",formatter:p,color:Object(l.d)((function(e){return u.a(1-e)})).domain([20,30,40]),normalized:!1}),b.set(n.ht_80_19_E,{name:"Maximum Month Temperature 1980-2019",units:"\xb0C",formatter:p,color:Object(l.d)((function(e){return u.a(1-e)})).domain([20,30,40]),normalized:!1}),b.set(n.ht_80_99_E,{name:"Maximum Month Temperature 1980-1999",units:"\xb0C",formatter:p,color:Object(l.d)((function(e){return u.a(1-e)})).domain([20,30,40]),normalized:!1}),b.set(n.pet_00_19_,{name:"Mean Annual Potential Evapotranspiration 2000-2019",units:"mm/year",formatter:p,color:Object(l.e)(d.a).domain([300,1700]),normalized:!1}),b.set(n.pet_80_19_,{name:"Mean Annual Potential Evapotranspiration 1980-2019",units:"mm/year",formatter:p,color:Object(l.e)(d.a).domain([300,1700]),normalized:!1}),b.set(n.pet_80_99_,{name:"Mean Annual Potential Evapotranspiration 1980-1999",units:"mm/year",formatter:p,color:Object(l.e)(d.a).domain([300,1700]),normalized:!1}),b.set(n.prc_00_19_,{name:"Mean Annual Precipitation 2000-2019",units:"mm/year",formatter:p,color:Object(l.e)(d.a).domain([0,2200]),normalized:!1}),b.set(n.prc_80_19_,{name:"Mean Annual Precipitation 1980-2019",units:"mm/year",formatter:p,color:Object(l.e)(d.a).domain([0,2200]),normalized:!1}),b.set(n.prc_80_99_,{name:"Mean Annual Precipitation 1980-1999",units:"mm/year",formatter:p,color:Object(l.e)(d.a).domain([0,2200]),normalized:!1}),b.set(n.ro_00_19_E,{name:"Mean Annual Runoff 2000-2019",units:"mm/year",formatter:p,color:Object(l.e)(d.a).domain([0,2e3]),normalized:!1}),b.set(n.ro_80_19_E,{name:"Mean Annual Runoff 1980-2019",units:"mm/year",formatter:p,color:Object(l.e)(d.a).domain([0,2e3]),normalized:!1}),b.set(n.ro_80_99_E,{name:"Mean Annual Runoff 1980-1999",units:"mm/year",formatter:p,color:Object(l.e)(d.a).domain([0,2e3]),normalized:!1}),b.set(n.wet_00_19_,{name:"Flood Indicator 2000-2019",units:"mm/month",formatter:p,color:Object(l.e)(d.a).domain([0,500]),normalized:!1}),b.set(n.wet_80_19_,{name:"Flood Indicator 1980-2019",units:"mm/month",formatter:p,color:Object(l.e)(d.a).domain([0,500]),normalized:!1}),b.set(n.wet_80_99_,{name:"Flood Indicator 1890-1999",units:"mm/month",formatter:p,color:Object(l.e)(d.a).domain([0,500]),normalized:!1}),b.set(n.GDP2018,{name:"GDP 2018",units:"USD",formatter:Object(l.b)("$,.0f"),color:Object(l.f)().domain([0,1e6,2e6,3e6,1e7,1e8,3e8,7e8]).range(f.b[8]),normalized:!1}),b.set(n.Allindustr,{name:"Allindustr",units:"",formatter:p,color:Object(l.e)(f.a).domain([0,1e6]),normalized:!1}),b.set(n.Farming,{name:"Farming",units:"",formatter:p,color:Object(l.e)(f.a).domain([0,2e4]),normalized:!1}),b.set(n.Mining,{name:"Mining",units:"",formatter:p,color:Object(l.e)(f.a).domain([0,2e4]),normalized:!1}),b.set(n.Constructi,{name:"Constructi",units:"",formatter:p,color:Object(l.e)(f.a).domain([0,2e4]),normalized:!1}),b.set(n.Retailtrad,{name:"Retailtrad",units:"",formatter:p,color:Object(l.e)(f.a).domain([0,2e4]),normalized:!1}),b.set(n.Informatio,{name:"Informatio",units:"",formatter:p,color:Object(l.e)(f.a).domain([0,2e4]),normalized:!1}),b.set(n.Wholesalet,{name:"Wholesalet",units:"",formatter:p,color:Object(l.e)(f.a).domain([0,2e4]),normalized:!1}),b.set(n.discuss,{name:"discuss",units:"",formatter:p,color:Object(l.e)(f.a).domain([20,60]),normalized:!1}),b.set(n.PerCapitap,{name:"PerCapitap",units:"",formatter:p,color:Object(l.d)(s.a).domain([1e4,4e4,1e5]),normalized:!1});var h=b,j=a(66),O=Object(l.g)("body").append("div").attr("class","tooltip").style("opacity",0).style("position","absolute").style("font-size","0.7em").style("font-family","sans-serif").style("font-weight",600).style("padding","4px").style("background","white").style("pointer-events","none"),g=function(e,t){return void 0===e?"No data":t.formatter(e)+E(t.units)},E=function(e){return e?" ".concat(e):""},y=function(e){Object(l.g)(this).style("opacity",1).style("stroke",null),O.transition().duration(200).style("opacity",0)},z=function(e){var t=e.data,a=e.selection,i=Object(o.useRef)(null);return Object(o.useEffect)((function(){var e=h.get(a),o=Object(l.g)(i.current);if(void 0!==t){var r,m=Object(_.a)(t,t.objects.counties),c=Object(j.a)().cells(5).shapeWidth(20).shapeHeight(30).shapePadding(0).titleWidth(200).title(e.name+(r=e.units,r?" (".concat(r,")"):"")).labelFormat(e.formatter).orient("vertical").scale(e.color);o.select("#legend").attr("transform","translate(925, 320)").call(c),o.select("#counties").selectAll("path").data(m.features).join("path").attr("class","county").attr("fill",(function(t){var o;return t.properties&&null!==(o=e.color(t.properties[n[a]]))&&void 0!==o?o:"#ccc"})).attr("d",Object(l.c)()),o.select("#states").select("path").datum(Object(_.b)(t,t.objects.states)).attr("fill","none").attr("stroke","white").attr("stroke-linejoin","round").attr("d",Object(l.c)()),o.selectAll(".county").on("touchmove mousemove",function(e){return function(t){var a;Object(l.g)(this).style("opacity",.5).style("stroke","black").style("stroke-width",.5),O.transition().duration(200).style("opacity",.9);var o=null!==(a=t.properties.County_Sta.replace("_",", "))&&void 0!==a?a:"---",r=t.properties[n[e]],i=h.get(e);O.html("".concat(o,": ").concat(g(r,i))).style("left","".concat(l.a.pageX+20,"px")).style("top",l.a.pageY-45+"px")}}(a)).on("touchend mouseleave",y)}}),[t,a]),r.a.createElement("svg",{ref:i,viewBox:"0, 0, 1175, 610"},r.a.createElement("g",{id:"legend"}),r.a.createElement("g",{id:"counties"}),r.a.createElement("g",{id:"states"},r.a.createElement("path",null)))},v=function(e){var t=e.selection,a=e.onSelectionChange,o=e.showNormalized;return r.a.createElement("select",{value:n[t],onChange:a},Array.from(h.entries()).filter((function(e){var t=Object(c.a)(e,2),a=(t[0],t[1]);return o?a.normalized:!a.normalized})).map((function(e){var t,a=Object(c.a)(e,2),o=a[0],i=a[1];return r.a.createElement("option",{key:n[o],value:n[o]},i.name," ",(t=i.units)?"(".concat(t,")"):"")})))},w=function(e){var t=e.onSelectionChange,a=e.showNormalized;return r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement("input",{type:"radio",id:"raw",name:"data-type",value:"raw",checked:!a,onChange:t}),r.a.createElement("label",{htmlFor:"raw"},"Raw Data")),r.a.createElement("div",null,r.a.createElement("input",{type:"radio",id:"normalized",name:"data-type",value:"normalized",checked:a,onChange:t}),r.a.createElement("label",{htmlFor:"normalized"},"Normalized Data")))},M=(a(98),a(124)),C=a(5);function k(e){return n[e]}function I(e){var t,a,n=!1;void 0!==e&&((n=h.get(e).normalized)?t=e:a=e);return{selection:a,normalizedSelection:t,normalized:n}}var S=function(){var e=Object(C.f)(),t=I(k(new URLSearchParams(Object(C.g)().search).get("id"))),a=void 0!==t.selection?t.selection:n.def_80_19_,i=void 0!==t.normalizedSelection?t.normalizedSelection:n.cmi10_80_1,m=t.normalized,l=Object(o.useState)(void 0),_=Object(c.a)(l,2),s=_[0],d=_[1],u=Object(o.useState)(a),f=Object(c.a)(u,2),p=f[0],b=f[1],h=Object(o.useState)(i),j=Object(c.a)(h,2),O=j[0],g=j[1],E=Object(o.useState)(m),y=Object(c.a)(E,2),S=y[0],A=y[1];Object(o.useEffect)((function(){Object(M.a)("/climate-risk-map/usa-topo.json").then(d)}),[]);Object(o.useEffect)((function(){void 0!==a&&b(a)}),[a]),Object(o.useEffect)((function(){void 0!==i&&g(i)}),[i]),Object(o.useEffect)((function(){A(m)}),[m]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Climate Risk Map"),r.a.createElement(w,{onSelectionChange:function(t){var a="normalized"===t.target.value;A(a);var o=a?O:p;e.push("?id="+n[o])},showNormalized:S}),r.a.createElement(v,{onSelectionChange:function(t){e.push("?id="+t.target.value);var a=I(k(t.target.value));void 0!==a.selection&&b(a.selection),void 0!==a.normalizedSelection&&g(a.normalizedSelection)},selection:S?O:p,showNormalized:S}),r.a.createElement(z,{data:s,selection:S?O:p}))},A=a(34),P=function(){return r.a.createElement(A.a,{basename:"/climate-risk-map"},r.a.createElement(C.c,null,r.a.createElement(C.a,{path:"/"},r.a.createElement(S,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));m.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},92:function(e,t,a){e.exports=a(104)},97:function(e,t,a){},98:function(e,t,a){}},[[92,1,2]]]);
//# sourceMappingURL=main.ac0a682a.chunk.js.map